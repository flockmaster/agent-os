# PRD: Antigravity Agent OS v4.0 â€” å…¨é¢è½åœ°è®¡åˆ’ (ç”¨æˆ·ç‰ˆ)

> ç‰ˆæœ¬: 1.0 | æ—¥æœŸ: 2026-02-09 | çŠ¶æ€: å¾…ç¡®è®¤

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 ä¸€å¥è¯å®šä½
> å°† Antigravity Agent OS ä»Ž"æž¶æž„å®Œå¤‡çš„è“å›¾"æŽ¨è¿›åˆ°"ç«¯åˆ°ç«¯å¯ç”¨çš„æ™ºèƒ½å¼€å‘çŽ¯å¢ƒ"ã€‚

### 1.2 å½“å‰çŽ°çŠ¶ (As-Is)
Antigravity å·²å»ºç«‹äº†å®Œæ•´çš„å››å±‚æž¶æž„â€”â€”Memoryï¼ˆè®°å¿†ï¼‰ã€Routerï¼ˆè·¯ç”±ï¼‰ã€Skillsï¼ˆæŠ€èƒ½ï¼‰ã€Workflowsï¼ˆå·¥ä½œæµï¼‰ï¼Œå¹¶è®¾è®¡äº†ä¸šç•Œé¢†å…ˆçš„ Evolution Engineï¼ˆè‡ªè¿›åŒ–å¼•æ“Žï¼‰æ¦‚å¿µã€‚

ä½†ç›®å‰ï¼š
- **è°ƒåº¦ç®¡é“æœªé—­çŽ¯**: Codex Dispatcher ä»…å®Œæˆ 2/7 æ ¸å¿ƒä»»åŠ¡ï¼Œç”¨æˆ·æ— æ³•çœŸæ­£äº«å—"è‡ªåŠ¨ç»­èˆª"
- **è¿›åŒ–å¼•æ“Žç©ºè½¬**: 12 ä¸ªä»»åŠ¡ä»…å®Œæˆ 2 ä¸ªï¼ŒçŸ¥è¯†åº“å†…ä»… 5 æ¡ç§å­æ¡ç›®
- **å…¨éƒ¨è§„åˆ™ä¸ºæŸ”æ€§çº¦æŸ**: å…³é”®æ“ä½œï¼ˆå¦‚ Git æäº¤ã€æ£€æŸ¥ç‚¹åˆ›å»ºï¼‰å¯èƒ½è¢«æ¨¡åž‹è·³è¿‡
- **æ¨¡åž‹ç»‘å®š Gemini**: é…ç½®æ–‡ä»¶åã€API åç§°ã€ç›®å½•ç»“æž„å‡ä¸º Gemini ä¸“å±ž

### 1.3 ç›®æ ‡æ„¿æ™¯ (To-Be)
| èƒ½åŠ› | Before (v3.0) | After (v4.0) |
|------|--------------|--------------|
| è‡ªåŠ¨ç»­èˆª | æ–‡æ¡£å®šä¹‰äº†ï¼Œä½†è·‘ä¸èµ·æ¥ | ç«¯åˆ°ç«¯è‡ªåŠ¨æ‰§è¡Œ PRD ä¸­å…¨éƒ¨ä»»åŠ¡ |
| è‡ªè¿›åŒ– | éª¨æž¶å·²æ­ï¼Œä½†æ•°æ®ä¸ºé›¶ | æ¯æ¬¡ä»»åŠ¡åŽè‡ªåŠ¨æ”¶å‰²çŸ¥è¯†ï¼Œé¦–æœˆ 20+ æ¡ç›® |
| å…³é”®ä¿éšœ | çº¯ Prompt çº¦æŸ | å…³é”®è·¯å¾„æœ‰ç¡¬ç¼–ç å®ˆå«+è½¯æ€§çº¦æŸåŒä¿é™© |
| æ¨¡åž‹å…¼å®¹ | Gemini Only | Gemini / Claude / GPT å‡å¯é©±åŠ¨ |
| å¯è§‚æµ‹æ€§ | æ—  | `/status` å®žæ—¶ä»ªè¡¨ç›˜ + ç»“æž„åŒ–æ—¥å¿— |
| å†·å¯åŠ¨ä½“éªŒ | ç©ºçŸ¥è¯†åº“ | é¢„ç½®ç§å­çŸ¥è¯†åŒ… (20+ é€šç”¨æœ€ä½³å®žè·µ) |

---

## 2. æ ¸å¿ƒåŠŸèƒ½

| # | åŠŸèƒ½ | æè¿° | ä¼˜å…ˆçº§ | å¯¹åº”é˜¶æ®µ |
|---|------|------|--------|---------|
| F1 | **Worker å°è£…å™¨** | å°è£… `codex exec` è°ƒç”¨ï¼Œæ”¯æŒ JSONL è§£æžã€è¶…æ—¶æŽ§åˆ¶ã€è¿›ç¨‹ç®¡ç† | P0 | Phase 1 |
| F2 | **é‡å¯æ³¨å…¥æœºåˆ¶** | Worker æé—®æ—¶ PM ç»ˆæ­¢è¿›ç¨‹ã€æ³¨å…¥ç­”æ¡ˆã€é‡å¯ï¼Œå®žçŽ°éžäº¤äº’å¼å¯¹è¯ | P0 | Phase 1 |
| F3 | **Git è‡ªåŠ¨æäº¤** | æ¯ä¸ªä»»åŠ¡å®ŒæˆåŽè‡ªåŠ¨ `git add && git commit`ï¼Œ100% ä¸é—æ¼ | P0 | Phase 1 |
| F4 | **çŸ¥è¯†æ”¶å‰²å™¨è½åœ°** | ä»Žå¯¹è¯/ä»£ç å˜æ›´ä¸­è‡ªåŠ¨æå–å¯å¤ç”¨çŸ¥è¯†ï¼Œå­˜å…¥ç»“æž„åŒ–çŸ¥è¯†åº“ | P0 | Phase 2 |
| F5 | **ç§å­çŸ¥è¯†åŒ…** | é¢„å¡« 20+ æ¡é€šç”¨å¼€å‘æœ€ä½³å®žè·µï¼Œæ¶ˆé™¤å†·å¯åŠ¨ä½“éªŒæ–­å±‚ | P1 | Phase 2 |
| F6 | **åæ€å¼•æ“Žè½åœ°** | ä»»åŠ¡å®ŒæˆåŽè‡ªåŠ¨ç”Ÿæˆç»“æž„åŒ–åæ€æŠ¥å‘Š (WWW / WCI / Learnings) | P1 | Phase 2 |
| F7 | **æ¨¡å¼æ£€æµ‹å™¨ MVP** | ä»£ç æäº¤åŽæ‰«æ diffï¼Œè¯†åˆ«é‡å¤æ¨¡å¼ï¼Œè¾¾ 3 æ¬¡å‡ºçŽ°è‡ªåŠ¨å…¥åº“ | P2 | Phase 2 |
| F8 | **ç¡¬ç¼–ç å®ˆå«å±‚** | Git Hooks + Python Watchdogï¼Œä¿éšœæ£€æŸ¥ç‚¹åˆ›å»ºã€çŠ¶æ€å›žå†™ä¸è¢«è·³è¿‡ | P0 | Phase 3 |
| F9 | **å¤šæ¨¡åž‹é€‚é…å±‚** | é…ç½®æ–‡ä»¶ä»Ž `GEMINI.md` æŠ½è±¡ä¸º `AGENT_CONFIG.md`ï¼Œæ”¯æŒå¤šæ¨¡åž‹åŽç«¯ | P1 | Phase 3 |
| F10 | **è¿è¡Œæ—¶ä»ªè¡¨ç›˜** | `/status` å‘½ä»¤è¾“å‡ºç»“æž„åŒ–è¿›åº¦çœ‹æ¿ï¼Œå«ä»»åŠ¡è¿›åº¦ã€çŸ¥è¯†åº“ç»Ÿè®¡ã€æŒ‡æ ‡è¶‹åŠ¿ | P2 | Phase 3 |

---

## 3. å…³é”®è®¾è®¡å†³ç­–

| å†³ç­–ç‚¹ | é€‰æ‹© | ç†ç”± |
|-------|------|-----|
| å®ˆå«å®žçŽ°æ–¹å¼ | Git Hooks + è½»é‡ Python è„šæœ¬ | ä¸å¼•å…¥é‡åž‹æ¡†æž¶ï¼Œä¿æŒ"å¤åˆ¶å³ç”¨"çš„ä¾¿æºæ€§ |
| é‡å¯æ³¨å…¥çš„é€€å‡ºæ¡ä»¶ | åŒä¸€ä»»åŠ¡æœ€å¤šé‡å¯ 3 æ¬¡ | é˜²æ­¢ O(nÂ²) Token æµªè´¹å¯¼è‡´çš„æˆæœ¬å¤±æŽ§ |
| ç§å­çŸ¥è¯†åŒ…èŒƒå›´ | é€šç”¨ Flutter + Dart + å·¥ç¨‹è§„èŒƒ | é¦–ç‰ˆèšç„¦ Flutterï¼ŒåŽç»­æŒ‰ç”Ÿæ€æ‰©å±• |
| å¤šæ¨¡åž‹é€‚é…ç­–ç•¥ | é…ç½®å±‚æŠ½è±¡ + Provider æ¨¡å¼ | ä¸æ”¹æ ¸å¿ƒé€»è¾‘ï¼Œä»…æ›¿æ¢é…ç½®æ¨¡æ¿ |
| å¹¶è¡Œè°ƒåº¦ | v4.0 ä¸åšï¼Œv5.0 è§„åˆ’ | ä¸²è¡Œè¶³ä»¥éªŒè¯ä»·å€¼ï¼Œå¹¶è¡Œå¼•å…¥è¿‡å¤šå¤æ‚åº¦ |
| ä»ªè¡¨ç›˜å½¢å¼ | ç»ˆç«¯ Markdown è¾“å‡º | ä¸å¼•å…¥ Web UI ä¾èµ–ï¼Œä¿æŒæžç®€ |

---

## 4. ä¸‰é˜¶æ®µäº¤ä»˜è®¡åˆ’

```
Phase 1: Dispatcher MVP (3-4 å¤©)
  â†’ è‡ªåŠ¨åŒ–ç®¡é“ç«¯åˆ°ç«¯é—­çŽ¯
  â†’ ç”¨æˆ·å¯ä»¥è¯´ "æ‰§è¡Œè¿™ä¸ª PRD" ç„¶åŽåŽ»å–èŒ¶

Phase 2: Evolution Engine è½åœ° (4-5 å¤©)
  â†’ è¿›åŒ–å¼•æ“Žä»Žéª¨æž¶å˜ä¸ºå¯è¿è½¬çš„æœ‰æœºä½“
  â†’ æ¯æ¬¡ä»»åŠ¡åŽçŸ¥è¯†åº“è‡ªåŠ¨å¢žé•¿

Phase 3: åŠ å›º & å¤šæ¨¡åž‹ (3-4 å¤©)
  â†’ å…³é”®è·¯å¾„ä¸å†ä¾èµ–"æ¨¡åž‹è‡ªè§‰"
  â†’ Claude / GPT ç”¨æˆ·ä¹Ÿèƒ½ä½¿ç”¨æœ¬ç³»ç»Ÿ
```

---

## 5. ä¸åšä»€ä¹ˆ (Out of Scope v4.0)

- âŒ ä¸åšå¹¶è¡Œ Worker è°ƒåº¦ï¼ˆv5.0 è§„åˆ’ï¼‰
- âŒ ä¸åš Web UI ç›‘æŽ§é¢æ¿ï¼ˆç»ˆç«¯è¾“å‡ºè¶³å¤Ÿï¼‰
- âŒ ä¸åšè·¨é¡¹ç›®çŸ¥è¯†å…±äº«ï¼ˆå•é¡¹ç›®å†…é—­çŽ¯ä¼˜å…ˆï¼‰
- âŒ ä¸åšè‡ªåŠ¨åŒ– CI/CD é›†æˆï¼ˆä¿æŒ"å¤åˆ¶å³ç”¨"ï¼‰
- âŒ ä¸åš MCP Server å°è£…ï¼ˆå½“å‰é˜¶æ®µæ— éœ€å¤–éƒ¨ APIï¼‰

---

## 6. æˆåŠŸæŒ‡æ ‡

| æŒ‡æ ‡ | åŸºçº¿ (v3.0) | ç›®æ ‡ (v4.0) | è¡¡é‡æ–¹å¼ |
|-----|-------------|-------------|---------|
| **ç«¯åˆ°ç«¯è‡ªåŠ¨åŒ–çŽ‡** | 0% (ç®¡é“æœªé—­åˆ) | â‰¥ 80% | 10 ä»»åŠ¡ PRD ä¸­æ— éœ€äººå·¥ä»‹å…¥å®Œæˆçš„æ¯”ä¾‹ |
| **çŸ¥è¯†åº“æ¡ç›®æ•°** | 5 æ¡ (æ‰‹åŠ¨å¡«å…¥) | 25+ æ¡ (è‡ªåŠ¨æ”¶å‰²) | `knowledge_base.md` æ¡ç›®ç»Ÿè®¡ |
| **å…³é”®æ“ä½œéµå¾ªçŽ‡** | ~70% (çº¯ Prompt) | â‰¥ 95% | Git æäº¤ / æ£€æŸ¥ç‚¹åˆ›å»ºçš„æ‰§è¡ŒçŽ‡ |
| **å†·å¯åŠ¨åˆ°é¦–æ¬¡ä»·å€¼** | > 30 åˆ†é’Ÿ | < 5 åˆ†é’Ÿ | æ–°ç”¨æˆ·ä»Žå¤åˆ¶ `.agent/` åˆ°é¦–æ¬¡æˆåŠŸæ‰§è¡Œä»»åŠ¡ |
| **æ¨¡åž‹å…¼å®¹æ•°** | 1 (Gemini) | 3 (Gemini/Claude/GPT) | ç«¯åˆ°ç«¯é€šè¿‡æµ‹è¯•çš„æ¨¡åž‹æ•° |

---

## 7. é£Žé™©ä¸ŽæŒ‘æˆ˜

| é£Žé™© | ç­‰çº§ | å½±å“ | ç¼“è§£æŽªæ–½ |
|------|------|------|---------|
| âš ï¸ Codex CLI API å˜æ›´ | ðŸ”´ é«˜ | Worker å°è£…å™¨å¤±æ•ˆ | å°è£…å±‚åšç‰ˆæœ¬å…¼å®¹æ£€æŸ¥ï¼Œé™çº§åˆ° raw text æ¨¡å¼ |
| âš ï¸ é‡å¯æ³¨å…¥æ•ˆçŽ‡ä½Ž | ðŸŸ¡ ä¸­ | å¤æ‚ä»»åŠ¡è€—æ—¶è¿‡é•¿ | è®¾ç½® 3 æ¬¡é‡å¯ä¸Šé™ + å¢žé‡ Prompt åŽ‹ç¼© |
| âš ï¸ çŸ¥è¯†æ”¶å‰²è´¨é‡ä½Ž | ðŸŸ¡ ä¸­ | ä½Žè´¨é‡çŸ¥è¯†ç¨€é‡Šæ³¨æ„åŠ› | Confidence åˆ†æ•° + 30 å¤©è‡ªåŠ¨è¡°å‡ |
| âš ï¸ å¤šæ¨¡åž‹è¡Œä¸ºå·®å¼‚ | ðŸŸ¡ ä¸­ | åŒä¸€ Workflow åœ¨ä¸åŒæ¨¡åž‹ä¸Šè¡¨çŽ°ä¸ä¸€è‡´ | å»ºç«‹ Model Compatibility Matrix + å›žå½’æµ‹è¯• |
| âš ï¸ ç¡¬ç¼–ç å®ˆå«å¼•å…¥ç»´æŠ¤æˆæœ¬ | ðŸŸ¢ ä½Ž | éœ€è·Ÿéšç³»ç»Ÿå‡çº§ç»´æŠ¤è„šæœ¬ | å®ˆå«è„šæœ¬æžç®€åŒ– (< 100 è¡Œ) |

---

**è¯·ç¡®è®¤ä»¥ä¸Šå†…å®¹ï¼Œè¯´ "Go" è¿›å…¥æŠ€æœ¯è¯„å®¡ä¸Žç ”å‘ç‰ˆ PRD ç”Ÿæˆã€‚**
